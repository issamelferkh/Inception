# server {  

#     listen 80 default_server;  
#     root /www/wordpress;  
#     index index.php;

#     charset utf-8;  

#     # location / {  
#     #   try_files $uri $uri/ /index.php?$query_string;  
#     # }  

#     location = /favicon.ico { access_log off; log_not_found off; }  
#     location = /robots.txt { access_log off; log_not_found off; allow all;}  

#     access_log off;  
#     error_log /var/log/nginx/error.log error;  

#     sendfile off;  

#     client_max_body_size 100m;  

#     location ~ .php$ {  
#       fastcgi_split_path_info ^(.+.php)(/.+)$;  
#       fastcgi_pass wordpress:9000;  
#       fastcgi_index index.php;  
#       include fastcgi_params;  
#       fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;  
#       fastcgi_intercept_errors off;  
#       fastcgi_buffer_size 16k;  
#       fastcgi_buffers 4 16k;  
#   }  

#     location ~ /.ht {  
#     deny all;  
#   }  
# } 



server {  

    listen 443 ssl;
    root /www/wordpress;  
    index index.php;

    ssl_certificate /etc/nginx/certs/self-signed/nginx-selfsigned.crt;
    ssl_certificate_key /etc/nginx/certs/self-signed/nginx-selfsigned.key;

    charset utf-8;  

    # location / {  
    #   try_files $uri $uri/ /index.php?$query_string;  
    # }  

    location = /favicon.ico { access_log off; log_not_found off; }  
    location = /robots.txt { access_log off; log_not_found off; allow all;}  

    access_log off;  
    error_log /var/log/nginx/error.log error;  

    sendfile off;  

    client_max_body_size 100m;  

    location ~ .php$ {  
      fastcgi_split_path_info ^(.+.php)(/.+)$;  
      fastcgi_pass wordpress:9000;  
      fastcgi_index index.php;  
      include fastcgi_params;  
      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;  
      fastcgi_intercept_errors off;  
      fastcgi_buffer_size 16k;  
      fastcgi_buffers 4 16k;  
  }  

    location ~ /.ht {  
    deny all;  
  }  
} 



# server {
#   # Listen port
#   listen 443 ssl;
#   ## Your website name goes here.
#   server_name issamelferkh.me;

#   ## Your only path reference.
#   root /var/www/html;

#   ## Define index
#   index index.php;
  
#   location / {
#     # This is cool because no php is touched for static content.
#     # include the "?$args" part so non-default permalinks doesn't break when using query string
#     try_files $uri $uri/ /index.php?$args;
#   }

#   location ~ \.php$ {
#     #NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
#     include fastcgi_params;
#     fastcgi_intercept_errors on;
#     fastcgi_pass php;
#     #The following parameter can be also included in fastcgi_params file
#     fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
#   }

#   location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
#     expires max;
#     log_not_found off;
#   }

#   ssl_certificate /etc/nginx/certs/self-signed/nginx-selfsigned.crt;
#   ssl_certificate_key /etc/nginx/certs/self-signed/nginx-selfsigned.key;
# }